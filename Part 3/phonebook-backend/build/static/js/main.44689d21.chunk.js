(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),a=t(15),u=t.n(a),o=(t(20),t(6)),i=t(3),s=t(0),l=function(e){var n=e.handleFilterChange;return Object(s.jsxs)("div",{children:["Filter: ",Object(s.jsx)("input",{onChange:n})]})},d=function(e){var n=e.addPerson,t=e.handleNameChange,c=e.handleNumberChange;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["Name: ",Object(s.jsx)("input",{onChange:t})]}),Object(s.jsxs)("div",{children:["Number: ",Object(s.jsx)("input",{onChange:c})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})},j=function(e){var n=e.persons,t=e.removePerson;return Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsxs)("li",{children:[e.name,"'s No: ",e.number,Object(s.jsx)("button",{onClick:function(){return t(e.id)},children:"Delete"})]},e.name)}))})},b=t(4),f=t.n(b),h="/api/persons",m={getAll:function(){return f.a.get(h).then((function(e){return e.data}))},create:function(e){return f.a.post(h,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))}},O=function(e){var n=e.message;return null===n?null:n.includes("ERROR")?Object(s.jsx)("div",{className:"error",children:n}):Object(s.jsx)("div",{className:"success",children:n})},v=function(){var e=Object(c.useState)(""),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),b=u[0],f=u[1],h=Object(c.useState)(!0),v=Object(i.a)(h,2),p=v[0],x=v[1],g=Object(c.useState)(""),C=Object(i.a)(g,2),N=C[0],w=C[1],S=Object(c.useState)([]),k=Object(i.a)(S,2),y=k[0],R=k[1],E=Object(c.useState)(null),P=Object(i.a)(E,2),D=P[0],T=P[1];Object(c.useEffect)((function(){m.getAll().then((function(e){R(e)}))}),[]);Object(c.useEffect)((function(){""===N?x(p):p&&x(!p)}),[N,p]);var A=p?y:y.filter((function(e){var n=e.name.toUpperCase(),t=N.toUpperCase();return console.log(t),-1!==n.search(t)}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(O,{message:D}),Object(s.jsx)(l,{handleFilterChange:function(e){w(e.target.value)}}),Object(s.jsx)(d,{addPerson:function(e){if(e.preventDefault(),y.some((function(e){return e.name===t}))){if(window.confirm("Do you want to change ".concat(t,"'s number?"))){var n=y.find((function(e){return e.name===t})),c=Object(o.a)(Object(o.a)({},n),{},{number:b});m.update(c.id,c).then((function(e){R(y.map((function(n){return n.id!==c.id?n:e}))),T("".concat(c.name," number has successfully been changed")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){T("ERROR : ".concat(c.name," was already removed from server")),setTimeout((function(){T(null)}),5e3),R(y.filter((function(e){return e.id!==c.id})))}))}}else{var a={name:t,number:b};m.create(a).then((function(e){console.log(e),R(y.concat(a)),r(""),f(""),T("".concat(a.name," has been added to the server")),setTimeout((function(){T(null)}),5e3)}))}},handleNameChange:function(e){r(e.target.value)},handleNumberChange:function(e){f(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(j,{persons:A,removePerson:function(e){var n=y.filter((function(n){return n.id===e}))[0];window.confirm("Delete ".concat(n.name,"?"))&&(m.remove(e),R(y.filter((function(n){return n.id!==e}))),T("".concat(n.name," has successfully been removed from the server")),setTimeout((function(){T(null)}),5e3))}})]})};u.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(v,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.44689d21.chunk.js.map